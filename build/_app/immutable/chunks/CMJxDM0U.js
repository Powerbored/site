import{A as R,Q as B,X as S,R as Y,k as E,D as P,m as p,x,a8 as U,G as y,l as F,p as q,a9 as C,q as H,aa as $,H as k,v as G,n as j,w as D,ab as z,ac as Q,ad as O,N as X,g,a7 as N,ae as Z,af as J,ag as K,ah as V,ai as W,aj as ee,ak as se,al as te,am as ae,I as re,an as ne,ao as ie,ap as fe,f as ue,b as ce,aq as oe,ar as le}from"./jY4nZZVi.js";import{s as de,g as _e}from"./DOH63AGW.js";class he{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(s,a=!0){this.anchor=s,this.#r=a}#n=()=>{var s=R;if(this.#s.has(s)){var a=this.#s.get(s),e=this.#t.get(a);if(e)B(e),this.#a.delete(a);else{var n=this.#e.get(a);n&&(this.#t.set(a,n.effect),this.#e.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),e=n.effect)}for(const[r,f]of this.#s){if(this.#s.delete(r),r===s)break;const i=this.#e.get(f);i&&(S(i.effect),this.#e.delete(f))}for(const[r,f]of this.#t){if(r===a||this.#a.has(r))continue;const i=()=>{if(Array.from(this.#s.values()).includes(r)){var o=document.createDocumentFragment();U(f,o),o.append(E()),this.#e.set(r,{effect:f,fragment:o})}else S(f);this.#a.delete(r),this.#t.delete(r)};this.#r||!e?(this.#a.add(r),Y(f,i,!1)):i()}}};#i=s=>{this.#s.delete(s);const a=Array.from(this.#s.values());for(const[e,n]of this.#e)a.includes(e)||(S(n.effect),this.#e.delete(e))};ensure(s,a){var e=R,n=y();if(a&&!this.#t.has(s)&&!this.#e.has(s))if(n){var r=document.createDocumentFragment(),f=E();r.append(f),this.#e.set(s,{effect:P(()=>a(f)),fragment:r})}else this.#t.set(s,P(()=>a(this.anchor)));if(this.#s.set(e,s),n){for(const[i,u]of this.#t)i===s?e.unskip_effect(u):e.skip_effect(u);for(const[i,u]of this.#e)i===s?e.unskip_effect(u.effect):e.skip_effect(u.effect);e.oncommit(this.#n),e.ondiscard(this.#i)}else p&&(this.anchor=x),this.#n()}}function me(t,s,a=!1){p&&q();var e=new he(t),n=a?C:0;function r(f,i){if(p){const l=H(t);var u;if(l===$?u=0:l===k?u=!1:u=parseInt(l.substring(1)),f!==u){var o=G();j(o),e.anchor=o,D(!1),e.ensure(f,i),D(!0);return}}e.ensure(f,i)}F(()=>{var f=!1;s((i,u=0)=>{f=!0,r(u,i)}),f||r(!1,null)},n)}let b=!1,A=Symbol();function Se(t,s,a){const e=a[s]??={store:null,source:X(void 0),unsubscribe:O};if(e.store!==t&&!(A in a))if(e.unsubscribe(),e.store=t??null,t==null)e.source.v=void 0,e.unsubscribe=O;else{var n=!0;e.unsubscribe=de(t,r=>{n?e.source.v=r:N(e.source,r)}),n=!1}return t&&A in a?_e(t):g(e.source)}function pe(){const t={};function s(){z(()=>{for(var a in t)t[a].unsubscribe();Q(t,A,{enumerable:!1,value:!0})})}return[t,s]}function ve(t){var s=b;try{return b=!1,[t(),b]}finally{b=s}}function Ae(t,s,a,e){var n=!se||(a&te)!==0,r=(a&ae)!==0,f=(a&le)!==0,i=e,u=!0,o=()=>(u&&(u=!1,i=f?ce(e):e),i),l;if(r){var w=ie in t||fe in t;l=Z(t,s)?.set??(w&&s in t?c=>t[s]=c:void 0)}var _,T=!1;r?[_,T]=ve(()=>t[s]):_=t[s],_===void 0&&e!==void 0&&(_=o(),l&&(n&&J(),l(_)));var d;if(n?d=()=>{var c=t[s];return c===void 0?o():(u=!0,c)}:d=()=>{var c=t[s];return c!==void 0&&(i=void 0),c===void 0?i:c},n&&(a&K)===0)return d;if(l){var M=t.$$legacy;return(function(c,v){return arguments.length>0?((!n||!v||M||T)&&l(v?d():c),c):d()})}var m=!1,h=((a&oe)!==0?ue:re)(()=>(m=!1,d()));r&&g(h);var L=W;return(function(c,v){if(arguments.length>0){const I=v?g(h):n&&r?V(c):c;return N(h,I),m=!0,i!==void 0&&(i=I),c}return ne&&m||(L.f&ee)!==0?h.v:g(h)})}export{he as B,Se as a,me as i,Ae as p,pe as s};
