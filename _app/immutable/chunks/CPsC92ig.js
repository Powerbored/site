import{a as w,f as dt,c as gt,b as G}from"./CUpI4RrW.js";import"./DNt-grUP.js";import{o as mt}from"./Bp9MT3si.js";import{a6 as ut,d as h,a3 as vt,a5 as pt,s as F,c as Y,g as e,n as bt,r as A,a7 as v,O as z,a4 as xt,t as C}from"./BxQMHeZQ.js";import{p as d,i as J}from"./DBmzGnyP.js";import{e as K,i as Mt,s as g}from"./Cg5uY7Jz.js";import{i as wt}from"./f_Ikndy0.js";class O{#t=new WeakMap;#e;#n;static entries=new WeakMap;constructor(i){this.#n=i}observe(i,f){var u=this.#t.get(i)||new Set;return u.add(f),this.#t.set(i,u),this.#i().observe(i,this.#n),()=>{var I=this.#t.get(i);I.delete(f),I.size===0&&(this.#t.delete(i),this.#e.unobserve(i))}}#i(){return this.#e??(this.#e=new ResizeObserver(i=>{for(var f of i){O.entries.set(f.target,f);for(var u of this.#t.get(f.target)||[])u(f)}}))}}var yt=new O({box:"border-box"});function Q(y,i,f){var u=yt.observe(y,()=>f(y[i]));ut(()=>(h(()=>f(y[i])),u))}var Tt=G('<rect fill="red"></rect>'),_t=G('<rect x="0" y="0" width="100%" fill="red"></rect>'),St=G('<polyline fill="none" stroke-linecap="round" stroke-linejoin="round" class="svelte-di7tem"></polyline>'),Bt=G('<g class="lightning-bolt svelte-di7tem"><polyline fill="none" stroke-linecap="round" stroke-linejoin="round" class="transition-all duration-75 svelte-di7tem"></polyline><!></g>'),Pt=dt('<div class="fixed inset-0 pointer-events-none z-0 overflow-hidden"><div class="absolute inset-0 bg-transparent transition-colors duration-500"></div> <svg width="100%" height="100%" class="w-full h-full"><defs><filter id="glow"><feGaussianBlur stdDeviation="3" result="coloredBlur"></feGaussianBlur><feMerge><feMergeNode in="coloredBlur"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter></defs><!><!><defs><linearGradient id="grad" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#7dd3fc; stop-opacity:1"></stop><stop offset="100%" style="stop-color:#38bdf8; stop-opacity:0.8"></stop></linearGradient></defs></svg></div>');function Nt(y,i){vt(i,!1);let f=d(i,"minTimeBetweenStrikes",8,500),u=d(i,"maxTimeBetweenStrikes",8,3e3),I=d(i,"minSegments",8,8),Z=d(i,"maxSegments",8,16),$=d(i,"minBranches",8,0),tt=d(i,"maxBranches",8,6),k=d(i,"topRegion",8,.2),et=d(i,"bottomRegion",8,.2),nt=d(i,"minSegmentTime",8,20),it=d(i,"maxSegmentTime",8,30),N=d(i,"startFromMainTitle",8,!1),rt=d(i,"debug",8,!1),T=z([]),_=z(0),p=z(0),W=0,S=0,r=z(null);function at(){if(!N()){v(r,null);return}const n=document.getElementById("main-title");if(!n){v(r,null);return}const t=n.getBoundingClientRect();if(t.width>0&&t.height>0){const a=window.getComputedStyle(n);if(a.display!=="none"&&a.visibility!=="hidden"&&parseFloat(a.opacity)>0){v(r,t);return}}v(r,null)}function s(n,t){return Math.random()*(t-n)+n}function ot(){return N()&&e(r)?{x:s(e(r).left,e(r).right),y:s(e(r).top+e(r).height*.4,e(r).bottom-e(r).height*.4)}:{x:s(0,e(_)),y:s(0,e(p)*k())}}function st(){at();const n=ot(),t=n.x,a=n.y,c=s(0,e(_)),m=s(e(p)*(1-et()),e(p)),l=Math.floor(s(I(),Z())),o=[{x:t,y:a}];for(let x=1;x<=l;x++){const M=x/l,P=t+(c-t)*M,X=a+(m-a)*M,R=e(_)*.15*(1-Math.abs(M-.5)*2);o.push({x:P+s(-R,R),y:X})}const b=Math.floor(s($(),tt())),j=[];for(let x=0;x<b;x++){const M=Math.floor(s(1,o.length-2)),P=o[M],X=Math.floor(s(3,8)),R=[P];let H=P.x,L=P.y;const U=s(-Math.PI/4,Math.PI/4)+(Math.random()>.5?Math.PI/6:-Math.PI/6);for(let V=1;V<=X;V++)H+=Math.cos(U)*(e(_)*.05)+s(-20,20),L+=Math.sin(U)*(e(p)*.05)+s(0,20),R.push({x:H,y:L});j.push({points:R,startTime:M/o.length})}return{id:crypto.randomUUID(),mainPath:o,branches:j,startTime:performance.now(),duration:l*s(nt(),it()),flashing:!1,finished:!1}}function q(n){S=n,n>W&&(v(T,[...e(T),st()]),W=n+s(f(),u())),v(T,e(T).filter(t=>!t.finished).map(t=>{const a=n-t.startTime;return Math.min(a/t.duration,1)>=1&&!t.flashing?(t.flashing=!0,t):(t.flashing&&(t.finished=!0),t)})),requestAnimationFrame(q)}mt(()=>{S=performance.now(),W=S+s(f(),u());const n=requestAnimationFrame(q);return()=>cancelAnimationFrame(n)});function lt(n){const t=S-n.startTime,a=Math.min(t/n.duration,1),c=Math.ceil(a*n.mainPath.length);return n.mainPath.slice(0,c).map(m=>`${m.x},${m.y}`).join(" ")}function ct(n,t){const a=S-n.startTime,c=Math.min(a/n.duration,1);if(c<t.startTime)return"";const m=(c-t.startTime)/(1-t.startTime),l=Math.ceil(m*t.points.length);return t.points.slice(0,l).map(o=>`${o.x},${o.y}`).join(" ")}wt();var B=Pt(),D=F(Y(B),2),E=F(Y(D));{var ft=n=>{var t=gt(),a=xt(t);{var c=l=>{var o=Tt();C(()=>{g(o,"x",(e(r),h(()=>e(r).left))),g(o,"y",(e(r),h(()=>e(r).top+e(r).height*.4))),g(o,"width",(e(r),h(()=>e(r).width))),g(o,"height",(e(r),h(()=>e(r).height*.2)))}),w(l,o)},m=l=>{var o=_t();C(()=>g(o,"height",e(p)*k())),w(l,o)};J(a,l=>{N()&&e(r)?l(c):l(m,!1)})}w(n,t)};J(E,n=>{rt()&&n(ft)})}var ht=F(E);K(ht,1,()=>e(T),n=>n.id,(n,t)=>{var a=Bt(),c=Y(a),m=F(c);K(m,1,()=>(e(t),h(()=>e(t).branches)),Mt,(l,o)=>{var b=St();C(j=>{g(b,"points",j),g(b,"stroke",(e(t),h(()=>e(t).flashing?"white":"url(#grad)"))),g(b,"stroke-width",(e(t),h(()=>e(t).flashing?2:1)))},[()=>(e(t),e(o),h(()=>ct(e(t),e(o))))]),w(l,b)}),A(a),C(l=>{g(a,"filter",(e(t),h(()=>e(t).flashing?"url(#glow)":""))),g(c,"points",l),g(c,"stroke",(e(t),h(()=>e(t).flashing?"white":"url(#grad)"))),g(c,"stroke-width",(e(t),h(()=>e(t).flashing?4:2)))},[()=>(e(t),h(()=>lt(e(t))))]),w(n,a)}),bt(),A(D),A(B),Q(B,"clientWidth",n=>v(_,n)),Q(B,"clientHeight",n=>v(p,n)),w(y,B),pt()}export{Nt as L};
