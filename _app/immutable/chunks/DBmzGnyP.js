import{B as R,R as L,Y as S,S as Y,k as E,F as P,m as p,y as x,ae as y,I as F,l as U,q,af as C,v as H,ag as $,H as k,w as j,o as z,x as O,ah as G,ai as J,aj as D,O as Z,g,a7 as w,ak as K,al as Q,am as V,an as W,ao as X,ap as ee,aq as se,ar as te,as as ae,J as re,at as ie,au as ne,av as fe,i as ue,d as ce,aw as oe,ax as le}from"./BxQMHeZQ.js";import{s as de,g as _e}from"./Bp9MT3si.js";class he{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#r=!0;constructor(s,a=!0){this.anchor=s,this.#r=a}#i=()=>{var s=R;if(this.#s.has(s)){var a=this.#s.get(s),e=this.#t.get(a);if(e)L(e),this.#a.delete(a);else{var i=this.#e.get(a);i&&(this.#t.set(a,i.effect),this.#e.delete(a),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),e=i.effect)}for(const[r,f]of this.#s){if(this.#s.delete(r),r===s)break;const n=this.#e.get(f);n&&(S(n.effect),this.#e.delete(f))}for(const[r,f]of this.#t){if(r===a||this.#a.has(r))continue;const n=()=>{if(Array.from(this.#s.values()).includes(r)){var o=document.createDocumentFragment();y(f,o),o.append(E()),this.#e.set(r,{effect:f,fragment:o})}else S(f);this.#a.delete(r),this.#t.delete(r)};this.#r||!e?(this.#a.add(r),Y(f,n,!1)):n()}}};#n=s=>{this.#s.delete(s);const a=Array.from(this.#s.values());for(const[e,i]of this.#e)a.includes(e)||(S(i.effect),this.#e.delete(e))};ensure(s,a){var e=R,i=F();if(a&&!this.#t.has(s)&&!this.#e.has(s))if(i){var r=document.createDocumentFragment(),f=E();r.append(f),this.#e.set(s,{effect:P(()=>a(f)),fragment:r})}else this.#t.set(s,P(()=>a(this.anchor)));if(this.#s.set(e,s),i){for(const[n,u]of this.#t)n===s?e.unskip_effect(u):e.skip_effect(u);for(const[n,u]of this.#e)n===s?e.unskip_effect(u.effect):e.skip_effect(u.effect);e.oncommit(this.#i),e.ondiscard(this.#n)}else p&&(this.anchor=x),this.#i()}}function me(t,s,a=!1){p&&q();var e=new he(t),i=a?C:0;function r(f,n){if(p){const l=H(t);var u;if(l===$?u=0:l===k?u=!1:u=parseInt(l.substring(1)),f!==u){var o=j();z(o),e.anchor=o,O(!1),e.ensure(f,n),O(!0);return}}e.ensure(f,n)}U(()=>{var f=!1;s((n,u=0)=>{f=!0,r(u,n)}),f||r(!1,null)},i)}let b=!1,T=Symbol();function Se(t,s,a){const e=a[s]??={store:null,source:Z(void 0),unsubscribe:D};if(e.store!==t&&!(T in a))if(e.unsubscribe(),e.store=t??null,t==null)e.source.v=void 0,e.unsubscribe=D;else{var i=!0;e.unsubscribe=de(t,r=>{i?e.source.v=r:w(e.source,r)}),i=!1}return t&&T in a?_e(t):g(e.source)}function pe(){const t={};function s(){G(()=>{for(var a in t)t[a].unsubscribe();J(t,T,{enumerable:!1,value:!0})})}return[t,s]}function ve(t){var s=b;try{return b=!1,[t(),b]}finally{b=s}}function Te(t,s,a,e){var i=!se||(a&te)!==0,r=(a&ae)!==0,f=(a&le)!==0,n=e,u=!0,o=()=>(u&&(u=!1,n=f?ce(e):e),n),l;if(r){var N=ne in t||fe in t;l=K(t,s)?.set??(N&&s in t?c=>t[s]=c:void 0)}var _,A=!1;r?[_,A]=ve(()=>t[s]):_=t[s],_===void 0&&e!==void 0&&(_=o(),l&&(i&&Q(),l(_)));var d;if(i?d=()=>{var c=t[s];return c===void 0?o():(u=!0,c)}:d=()=>{var c=t[s];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(a&V)===0)return d;if(l){var M=t.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||M||A)&&l(v?d():c),c):d()})}var m=!1,h=((a&oe)!==0?ue:re)(()=>(m=!1,d()));r&&g(h);var B=X;return(function(c,v){if(arguments.length>0){const I=v?g(h):i&&r?W(c):c;return w(h,I),m=!0,n!==void 0&&(n=I),c}return ie&&m||(B.f&ee)!==0?h.v:g(h)})}export{he as B,Se as a,me as i,Te as p,pe as s};
